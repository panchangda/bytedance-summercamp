{"remainingRequest":"D:\\HXProjects\\AdministrationSystem\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\HXProjects\\AdministrationSystem\\vue-admin-template\\src\\views\\testdrive\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\HXProjects\\AdministrationSystem\\vue-admin-template\\src\\views\\testdrive\\index.vue","mtime":1625882854330},{"path":"D:\\HXProjects\\AdministrationSystem\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HXProjects\\AdministrationSystem\\vue-admin-template\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\HXProjects\\AdministrationSystem\\vue-admin-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\HXProjects\\AdministrationSystem\\vue-admin-template\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBmZXRjaFRlc3REcml2ZUxpc3QsIHVwZGF0ZVRlc3REcml2ZSB9IGZyb20gIkAvYXBpL3RhYmxlIjsNCmV4cG9ydCBkZWZhdWx0IHsNCiAgZmlsdGVyczogew0KICAgIHN0YXR1c0ZpbHRlcihzdGF0dXMpIHsNCiAgICAgIGNvbnN0IHN0YXR1c01hcCA9IHsNCiAgICAgICAi5b6F5aSE55CGIjogImluZm8iLA0KICAgICAgICAi5bey5aSE55CGIjogInN1Y2Nlc3MiLA0KICAgICAgICAiZGVsZXRlZCI6ICJkYW5nZXIiLA0KICAgICAgfTsNCiAgICAgIHJldHVybiBzdGF0dXNNYXBbc3RhdHVzXTsNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwNCiAgICAgIHRhYmxlRGF0YTogW10sDQogICAgICB0b3RhbDowLA0KICAgICAgbGlzdFF1ZXJ5OiB7DQogICAgICAgIHBhZ2U6IDEsDQogICAgICAgIHNpemU6IDIwLA0KICAgICAgICBpbXBvcnRhbmNlOiB1bmRlZmluZWQsDQogICAgICAgIHRpdGxlOiB1bmRlZmluZWQsDQogICAgICAgIHR5cGU6IHVuZGVmaW5lZCwNCiAgICAgICAgc29ydDogJytpZCcNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGdldFRlc3REcml2ZUxpc3QoKSB7DQogICAgICB0aGlzLmxpc3RMb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGZldGNoVGVzdERyaXZlTGlzdCh0aGlzLmxpc3RRdWVyeS5wYWdlKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlc3BvbnNlLmRhdGEuaXRlbXM7DQogICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsOw0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmxpc3RMb2FkaW5nID0gZmFsc2U7DQogICAgICAgIH0sIDEuNSAqIDEwMDApOw0KICAgICAgfSk7DQogICAgfSwNCiAgICBoYW5kbGVNb2RpZnlTdGF0dXMocm93LCBzdGF0dXMpIHsNCiAgICAgIHVwZGF0ZVRlc3REcml2ZSgpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIGlmIChyZXNwb25zZS5kYXRhID09ICJzdWNjZXNzIikgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgbWVzc2FnZTogIuaTjeS9nFN1Y2Nlc3MiLA0KICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLA0KICAgICAgICAgIH0pOw0KICAgICAgICAgIHJvdy5zdGF0dXMgPSBzdGF0dXM7DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgIG1lc3NhZ2U6ICLmk43kvZxGYWlsZWQiLA0KICAgICAgICAgICAgdHlwZTogImVycm9yIiwNCiAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgICAgfSkuY2F0Y2goZXJyPT57DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAi5pyq6I635Y+W5Yiw6L+U5Zue5YC8IiwNCiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsDQogICAgICAgICAgfSk7DQogICAgICAgICAgY29uc29sZS5sb2coZXJyKQ0KICAgICAgfSk7DQogICAgfSwNCiAgICAvLyBoYW5kbGVEZWxldGUocm93LCBpbmRleCkgew0KICAgIC8vICAgdGhpcy4kbm90aWZ5KHsNCiAgICAvLyAgICAgdGl0bGU6ICJTdWNjZXNzIiwNCiAgICAvLyAgICAgbWVzc2FnZTogIkRlbGV0ZSBTdWNjZXNzZnVsbHkiLA0KICAgIC8vICAgICB0eXBlOiAic3VjY2VzcyIsDQogICAgLy8gICAgIGR1cmF0aW9uOiAyMDAwLA0KICAgIC8vICAgfSk7DQogICAgLy8gICB0aGlzLnRhYmxlRGF0YS5zcGxpY2UoaW5kZXgsIDEpOw0KICAgIC8vIH0sDQogICAgaGFuZGxlUGFnZVR1cm5pbmcoZSl7DQogICAgICB0aGlzLmxpc3RRdWVyeS5wYWdlPWU7DQogICAgICB0aGlzLmdldFRlc3REcml2ZUxpc3QoKQ0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldFRlc3REcml2ZUxpc3QoKTsNCiAgfSwNCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/testdrive","sourcesContent":["<template>\r\n  <div>\r\n    <el-table\r\n      :data=\"tableData\"\r\n      v-loading=\"listLoading\"\r\n      style=\"width: 100%; margin-bottom: 20px\"\r\n      row-key=\"id\"\r\n      border\r\n    >\r\n    <el-table-column prop=\"date\" label=\"日期\" sortable width=\"180\">\r\n    </el-table-column>\r\n      <el-table-column prop=\"series\" label=\"车系\" sortable width=\"180\">\r\n      </el-table-column>\r\n      <el-table-column prop=\"type\" label=\"车型\" width=\"180\"> </el-table-column>\r\n      <el-table-column prop=\"city\" label=\"城市\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"姓名\"></el-table-column>\r\n      <el-table-column prop=\"phone\" label=\"电话\"></el-table-column>\r\n      <el-table-column label=\"Status\" class-name=\"status-col\" width=\"100\">\r\n        <template slot-scope=\"{ row }\">\r\n          <el-tag :type=\"row.status | statusFilter\">\r\n            {{ row.status }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        label=\"Actions\"\r\n        align=\"center\"\r\n        width=\"230\"\r\n        class-name=\"small-padding fixed-width\"\r\n      >\r\n        <template slot-scope=\"{ row }\">\r\n          <el-button\r\n            v-if=\"row.status != '待处理'\"\r\n            size=\"mini\"\r\n            type=\"success\"\r\n            @click=\"handleModifyStatus(row, '待处理')\"\r\n          >\r\n            撤销\r\n          </el-button>\r\n          <el-button\r\n            v-if=\"row.status != '已处理'\"\r\n            size=\"mini\"\r\n            @click=\"handleModifyStatus(row, '已处理')\"\r\n          >\r\n            处理\r\n          </el-button>\r\n          <!-- <el-button\r\n            v-if=\"row.status != 'deleted'\"\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(row, $index)\"\r\n          >\r\n            Delete\r\n          </el-button> -->\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination layout=\"prev, pager, next\" :total=\"total\" :page-size=\"listQuery.size\" :current-page.sync=\"listQuery.page\" @current-change=\"handlePageTurning\">\r\n    </el-pagination>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { fetchTestDriveList, updateTestDrive } from \"@/api/table\";\r\nexport default {\r\n  filters: {\r\n    statusFilter(status) {\r\n      const statusMap = {\r\n       \"待处理\": \"info\",\r\n        \"已处理\": \"success\",\r\n        \"deleted\": \"danger\",\r\n      };\r\n      return statusMap[status];\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      listLoading: true,\r\n      tableData: [],\r\n      total:0,\r\n      listQuery: {\r\n        page: 1,\r\n        size: 20,\r\n        importance: undefined,\r\n        title: undefined,\r\n        type: undefined,\r\n        sort: '+id'\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    getTestDriveList() {\r\n      this.listLoading = true;\r\n      fetchTestDriveList(this.listQuery.page).then((response) => {\r\n        this.tableData = response.data.items;\r\n        this.total = response.data.total;\r\n        setTimeout(() => {\r\n          this.listLoading = false;\r\n        }, 1.5 * 1000);\r\n      });\r\n    },\r\n    handleModifyStatus(row, status) {\r\n      updateTestDrive().then((response) => {\r\n        if (response.data == \"success\") {\r\n          this.$message({\r\n            message: \"操作Success\",\r\n            type: \"success\",\r\n          });\r\n          row.status = status;\r\n        } else {\r\n            this.$message({\r\n            message: \"操作Failed\",\r\n            type: \"error\",\r\n          });\r\n        }\r\n      }).catch(err=>{\r\n          this.$message({\r\n            message: \"未获取到返回值\",\r\n            type: \"error\",\r\n          });\r\n          console.log(err)\r\n      });\r\n    },\r\n    // handleDelete(row, index) {\r\n    //   this.$notify({\r\n    //     title: \"Success\",\r\n    //     message: \"Delete Successfully\",\r\n    //     type: \"success\",\r\n    //     duration: 2000,\r\n    //   });\r\n    //   this.tableData.splice(index, 1);\r\n    // },\r\n    handlePageTurning(e){\r\n      this.listQuery.page=e;\r\n      this.getTestDriveList()\r\n    }\r\n  },\r\n  created() {\r\n    this.getTestDriveList();\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n</style>"]}]}